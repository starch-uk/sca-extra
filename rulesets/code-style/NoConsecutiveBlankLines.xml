<?xml version="1.0" ?>
<ruleset
  name="Apex Code Style Rules"
  xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd"
>
  <description>Custom rules for Apex code style and formatting</description>

  <rule
    name="NoConsecutiveBlankLines"
    language="apex"
    message="Two or more consecutive blank lines are not allowed. Use at most one blank line between statements."
    class="net.sourceforge.pmd.lang.rule.xpath.XPathRule"
  >
    <description>
      Prevents two or more consecutive blank lines in Apex code.
            Code should have at most one blank line between statements, methods, or other code
      elements.
            This improves code readability and consistency.
    </description>
    <priority>3</priority>
    <properties>
      <property name="xpath">
        <value>
                    <![CDATA[
                    //BlockStatement/*[
                        following-sibling::*[1]
                        and @EndLine + 2 < following-sibling::*[1]/@BeginLine
                    ]
                    |
                    //Method[
                        following-sibling::*[1]
                        and @EndLine + 2 < following-sibling::*[1]/@BeginLine
                    ]
                    |
                    //FieldDeclarationStatements[
                        following-sibling::FieldDeclarationStatements[1]
                        and @EndLine + 2 < following-sibling::FieldDeclarationStatements[1]/@BeginLine
                    ]
                    ]]>
                </value>
      </property>
    </properties>
  </rule>
</ruleset>
