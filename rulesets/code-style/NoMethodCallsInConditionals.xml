<?xml version="1.0" ?>
<ruleset
	name="Apex Code Style Rules"
	xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd"
>
	<description>Custom rules for Apex code style and formatting</description>

	<rule
		name="NoMethodCallsInConditionals"
		language="apex"
		message="Method calls should not be used directly in conditional expressions. Extract the method call result to a variable first to improve readability and avoid side effects"
		class="net.sourceforge.pmd.lang.rule.xpath.XPathRule"
	>
		<description>
			Method calls should not be used directly in conditional expressions. Extract method call
			results to variables first to improve readability, avoid potential side effects from multiple
			evaluations, and make debugging easier. This rule applies to if, else-if, while, for,
			switch, and ternary expressions.
		</description>
		<priority>2</priority>
		<properties>
			<property name="xpath">
				<value
				><![CDATA[
					//(IfBlockStatement
						| WhileLoopStatement
						| SwitchStatement
						| ForLoopStatement
						| TernaryExpression
					)[StandardCondition//MethodCallExpression]
					|
					//IfElseBlockStatement[
						IfBlockStatement/StandardCondition//MethodCallExpression
					]
				]]></value>
			</property>
		</properties>
	</rule>
</ruleset>
