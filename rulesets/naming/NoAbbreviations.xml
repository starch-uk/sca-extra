<?xml version="1.0" ?>
<ruleset
	name="Apex Naming Rules"
	xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd"
>
	<description>Custom rules for Apex naming conventions</description>

	<rule
		name="NoAbbreviations"
		language="apex"
		message="Variable names must not use abbreviations. Use complete, descriptive words instead to make code clear and self-explanatory"
		class="net.sourceforge.pmd.lang.rule.xpath.XPathRule"
	>
		<description>
			Variable names must not use abbreviations. Use complete, descriptive words so that code
			is clear and self-explanatory. Abbreviations reduce code readability and can lead to confusion,
			especially for developers unfamiliar with the codebase. Common exceptions like 'Api', 'Html',
			'Id', and 'Url' are allowed as suffixes (configurable via allowedSuffixes
			property, comma-separated).
			Prefixes can also be allowed (configurable via allowedPrefixes property, comma-separated, empty by
			default).
		</description>
		<priority>2</priority>
		<properties>
			<property
				name="disallowedAbbreviations"
				type="String"
				description="Comma-separated list of disallowed abbreviations"
			>
				<value>
					acc,addr,attr,calc,cfg,col,con,ctx,curr,desc,dest,doc,dst,elem,fmt,hdr,idx,impl,init,lbl,len,mgr,msg,opp,opt,org,param,pos,prev,ref,repo,req,res,resp,spec,src,svc,util,val
				</value>
			</property>
			<property
				name="allowedSuffixes"
				type="String"
				description="Comma-separated list of allowed suffixes"
			>
				<value>Api,Html,Id,Url</value>
			</property>
			<property
				name="allowedPrefixes"
				type="String"
				description="Comma-separated list of allowed prefixes"
			>
				<value />
			</property>
			<property name="xpath">
				<value
				><![CDATA[
					//VariableDeclaration[
						VariableExpression[
							(
								if ('${disallowedAbbreviations}' = '${disallowedAbbreviations}' or '${disallowedAbbreviations}' = '')
								then (@Image = 'acc' or @Image = 'addr' or @Image = 'attr' or @Image = 'calc' or @Image = 'cfg' or @Image = 'col' or @Image = 'con' or @Image = 'ctx' or @Image = 'curr' or @Image = 'desc' or @Image = 'dest' or @Image = 'doc' or @Image = 'dst' or @Image = 'elem' or @Image = 'fmt' or @Image = 'hdr' or @Image = 'idx' or @Image = 'impl' or @Image = 'init' or @Image = 'lbl' or @Image = 'len' or @Image = 'mgr' or @Image = 'msg' or @Image = 'opp' or @Image = 'opt' or @Image = 'org' or @Image = 'param' or @Image = 'pos' or @Image = 'prev' or @Image = 'ref' or @Image = 'repo' or @Image = 'req' or @Image = 'res' or @Image = 'resp' or @Image = 'spec' or @Image = 'src' or @Image = 'svc' or @Image = 'util' or @Image = 'val')
								else (@Image = '${disallowedAbbreviations}' or contains(concat(',', '${disallowedAbbreviations}', ','), concat(',', @Image, ',')))
							)
							and not(
								if ('${allowedSuffixes}' = '${allowedSuffixes}' or '${allowedSuffixes}' = '')
								then matches(@Image, '(Api|Html|Id|Url)$')
								else (matches(@Image, concat('${allowedSuffixes}', '$')) or contains(concat(',', '${allowedSuffixes}', ','), concat(',', substring(@Image, string-length(@Image) - string-length('${allowedSuffixes}') + 1), ',')))
							)
							and not(
								'${allowedPrefixes}' != ''
								and (starts-with(@Image, '${allowedPrefixes}') or contains(concat(',', '${allowedPrefixes}', ','), concat(',', substring(@Image, 1, string-length('${allowedPrefixes}')), ',')))
							)
						]
					]
				]]></value>
			</property>
		</properties>
	</rule>
</ruleset>
