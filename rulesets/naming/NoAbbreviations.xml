<?xml version="1.0" ?>
<ruleset
	name="Apex Naming Rules"
	xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd"
>
	<description>Custom rules for Apex naming conventions</description>

	<rule
		name="NoAbbreviations"
		language="apex"
		message="Variable names must not use abbreviations. Use complete, descriptive words instead to make code clear and self-explanatory"
		class="net.sourceforge.pmd.lang.rule.xpath.XPathRule"
	>
		<description>
			Variable names must not use abbreviations. Use complete, descriptive words so that code
			is
			clear and self-explanatory. Abbreviations reduce code readability and can lead to confusion,
			especially for developers unfamiliar with the codebase. Common exceptions like 'Api', 'Html',
			'Id', and 'Url' are allowed as suffixes.
		</description>
		<priority>2</priority>
		<properties>
			<property name="xpath">
				<value
				><![CDATA[
					//VariableDeclaration[
						VariableExpression[
							some $abbr in tokenize(
								if ('${disallowedAbbreviations}' = '${disallowedAbbreviations}')
								then 'acc,addr,attr,calc,cfg,col,con,ctx,curr,desc,dest,doc,dst,elem,fmt,hdr,idx,impl,init,lbl,len,mgr,msg,opp,opt,org,param,pos,prev,ref,repo,req,res,resp,spec,src,svc,util,val'
								else '${disallowedAbbreviations}',
								','
							)
								satisfies @Image = normalize-space($abbr)
							and not(
								matches(
									@Image,
									concat(
										'(',
										if ('${allowedSuffixes}' = '${allowedSuffixes}')
										then 'Api|Html|Id|Url'
										else '${allowedSuffixes}',
										')$'
									)
								)
							)
						]
					]
				]]></value>
			</property>
		</properties>
	</rule>
</ruleset>
