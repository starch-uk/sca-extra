<?xml version="1.0" ?>
<ruleset
	name="Apex Naming Rules"
	xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd"
>
	<description>Custom rules for Apex naming conventions</description>

	<rule
		name="NoAbbreviations"
		language="apex"
		message="Variable names must not use abbreviations. Use complete, descriptive words instead."
		class="net.sourceforge.pmd.lang.rule.xpath.XPathRule"
	>
		<description>
			Variable names must not use abbreviations. Use complete, descriptive words
			so that code is clear and self-explanatory.
		</description>
		<priority>2</priority>
		<properties>
			<property name="xpath">
				<value
				><![CDATA[
					//VariableDeclaration[
						VariableExpression[
							some $abbr in tokenize(
								if ('${disallowedAbbreviations}' = '${disallowedAbbreviations}')
								then 'ctx,idx,msg,cfg,val,acc,con,opp,param,attr,elem,prev,curr,src,dest,dst,len,pos,mgr,svc,util,calc,init,ref,desc,impl,repo,col,hdr,doc,spec,req,res,resp,fmt,lbl,opt,addr,org'
								else '${disallowedAbbreviations}',
								','
							)
								satisfies @Image = normalize-space($abbr)
							and not(
								matches(
									@Image,
									concat(
										'(',
										if ('${allowedSuffixes}' = '${allowedSuffixes}')
										then 'Id|Api|Url|Html'
										else '${allowedSuffixes}',
										')$'
									)
								)
							)
						]
					]
				]]></value>
			</property>
		</properties>
	</rule>
</ruleset>
